# QuietMic

Low-touch iOS 26 voice recording app that is launched via iPhone's action. This app serves as a PoC MVP demonstrating that with AppIntent's and iOS Shortcuts, it is possible to start an audio recording session *without* ever foregrounding the app or opening the UI.

## Project Structure

```
.
├─ project.yml              # XcodeGen configuration (single source of truth for Plist, entitlements, etc.)
├─ Makefile                 # Build automation (gen, build, test, clean)
├─ Configs/
│  ├─ Base.xcconfig        # Swift 6, strict/approachable concurrency, shared settings
│  ├─ Debug.xcconfig
│  ├─ Release.xcconfig
│  ├─ QuietMic.Info.plist  # Generated by XcodeGen, tracked in git
│  └─ QuietMic.entitlements # Generated by XcodeGen, tracked in git
└─ ios/
   └─ QuietMic/
      ├─ App/              # Core app code (QuietMicApp.swift, etc.)
      ├─ Features/         # Future: Audio/, Shortcuts/ modules
      └─ Resources/        # Assets.xcassets
```

## Development Workflow

```bash
make gen    # Generate .xcodeproj from project.yml with caching (always run first)
make build  # Build app with Swift 6 strict concurrency
make test   # Run unit tests (Swift 6 concurrency issues expected in test targets)
make clean  # Clean build artifacts (simple xcodebuild clean)
```

**Critical**: Always run `make gen` after modifying `project.yml` or switching branches. XcodeGen uses `--use-cache` to prevent unnecessary file rewrites that can confuse Xcode's dependency tracking.

## Architecture Principles

**Agent-Intuitive Design**: One obvious place for each concern
- **Build policy**: Lives in `.xcconfig` files, not YAML
- **App metadata**: XcodeGen generates `Info.plist` and `.entitlements` in `Configs/` from inline properties in `project.yml`
- **Project wiring**: Single `project.yml` at root
- **Source organization**: Modular by feature, not by file type

**Swift 6 Complete Concurrency**: All new code must compile with strict concurrency checking enabled. This catches concurrency bugs at compile time.

**XcodeGen Over Xcode**: Project files are generated, not edited by hand. Generated plist/entitlements files are tracked in git to prevent "modified during build" conflicts and ensure reviewable changes.
